<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Conditional" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Conditional">
    <CallTarget Targets="Build" Condition=" '$(TargetFrameworkVersion)' == 'v4.0' or '$(TargetFrameworkVersion)' == '' " />
  </Target>
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>3.5</ProductVersion>
    <ProjectGuid>{457910bd-90a1-420d-927a-a22091ccb8ad}</ProjectGuid>
    <SchemaVersion>2.0</SchemaVersion>
    <OutputName>Cavity.TaskManagement</OutputName>
    <OutputType>Package</OutputType>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' AND '$(MSBuildExtensionsPath32)' != '' ">$(MSBuildExtensionsPath32)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
    <WixTargetsPath Condition=" '$(WixTargetsPath)' == '' ">$(MSBuildExtensionsPath)\Microsoft\WiX\v3.x\Wix.targets</WixTargetsPath>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
    <OutputPath>bin\</OutputPath>
    <IntermediateOutputPath>obj\</IntermediateOutputPath>
    <DefineConstants>Debug</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <OutputPath>bin\</OutputPath>
    <IntermediateOutputPath>obj\</IntermediateOutputPath>
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="Product.wxs" />
  </ItemGroup>
  <ItemGroup>
    <WixExtension Include="WixUtilExtension">
      <HintPath>$(WixExtDir)\WixUtilExtension.dll</HintPath>
      <Name>WixUtilExtension</Name>
    </WixExtension>
  </ItemGroup>
  <Choose>
    <When Condition=" '$(TargetFrameworkVersion)' == '' ">
      <PropertyGroup>
        <Bin>bin\$(Configuration)</Bin>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <Bin>bin\$(Configuration) $(TargetFrameworkVersion)</Bin>
    </PropertyGroup>
    </Otherwise>
  </Choose>
  <PropertyGroup>
    <ServiceOutputDirectory>$(SolutionDir)WindowsServices\TaskManagement.Service\$(Bin)\</ServiceOutputDirectory>
  </PropertyGroup>
  <Target Name="Copy Libraries" BeforeTargets="Compile">
    <Copy Condition=" Exists('$(SolutionDir)StaticLibraries\TaskManagement.EventLog.Messages\bin\Cavity.TaskManagement.EventLog.Messages.lib') " 
          SourceFiles="$(SolutionDir)StaticLibraries\TaskManagement.EventLog.Messages\bin\Cavity.TaskManagement.EventLog.Messages.lib"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Castle.Core.dll') "
          SourceFiles="$(ServiceOutputDirectory)Castle.Core.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Castle.DynamicProxy2.dll') "
          SourceFiles="$(ServiceOutputDirectory)Castle.DynamicProxy2.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Castle.MicroKernel.dll') "
          SourceFiles="$(ServiceOutputDirectory)Castle.MicroKernel.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Castle.Windsor.dll') "
          SourceFiles="$(ServiceOutputDirectory)Castle.Windsor.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)castle.config') "
          SourceFiles="$(ServiceOutputDirectory)castle.config"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Cavity.Core.dll') " 
          SourceFiles="$(ServiceOutputDirectory)Cavity.Core.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Cavity.ServiceLocation.dll') "
          SourceFiles="$(ServiceOutputDirectory)Cavity.ServiceLocation.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Cavity.ServiceLocation.CastleWindsor.dll') "
          SourceFiles="$(ServiceOutputDirectory)Cavity.ServiceLocation.CastleWindsor.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Cavity.TaskManagement.dll') " 
          SourceFiles="$(ServiceOutputDirectory)Cavity.TaskManagement.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Cavity.TaskManagement.Service.exe') " 
          SourceFiles="$(ServiceOutputDirectory)Cavity.TaskManagement.Service.exe"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Cavity.TaskManagement.Service.exe.config') " 
          SourceFiles="$(ServiceOutputDirectory)Cavity.TaskManagement.Service.exe.config"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)CommonServiceLocator.WindsorAdapter.dll') "
          SourceFiles="$(ServiceOutputDirectory)CommonServiceLocator.WindsorAdapter.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)log4net.dll') "
          SourceFiles="$(ServiceOutputDirectory)log4net.dll"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)log4net.config') "
          SourceFiles="$(ServiceOutputDirectory)log4net.config"
          DestinationFolder="obj" />
    <Copy Condition=" Exists('$(ServiceOutputDirectory)Microsoft.Practices.ServiceLocation.dll') "
          SourceFiles="$(ServiceOutputDirectory)Microsoft.Practices.ServiceLocation.dll"
          DestinationFolder="obj" />
  </Target>
  <Import Project="$(WixTargetsPath)" />
  <!--
	<Target Name="BeforeBuild">
	</Target>
	<Target Name="AfterBuild">
	</Target>
	-->
</Project>